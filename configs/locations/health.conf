# Health Check Endpoint
# ---------------------------------------------------------------------
location /health {
    limit_except GET {
        deny all;
    }
    
    content_by_lua_block {
        local middleware = require "middleware"
        local ctx = middleware.new_context()

        -- Run health checks
        if not middleware.run(ctx, "health_check") then
            return
        end

        -- Format response
        local response = require "handlers.health"
        response.handle(ctx)
    }
} 