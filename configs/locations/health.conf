# Health Check Endpoints
# ---------------------------------------------------------------------

# Basic health check
location /health {
    access_by_lua_block {
        local middleware_runner = require("modules.middleware.middleware_runner")
        local health = require("modules.services.health")
        
        -- Run middleware chain first
        if not middleware_runner.run() then
            return
        end
        
        -- Continue with health check
        health.check()
    }
}

# Detailed health check
location /health/details {
    access_by_lua_block {
        local middleware_runner = require("modules.middleware.middleware_runner")
        local health = require("modules.services.health")
        
        -- Run middleware chain first
        if not middleware_runner.run() then
            return
        end
        
        -- Continue with detailed health check
        health.check_detailed()
    }
} 