# Health Check Endpoints
# ---------------------------------------------------------------------

# Basic health check
location /health {
    access_by_lua_block {
        require("core.phase_handlers").access()
    }
    
    content_by_lua_block {
        -- Health check specific content handling
        local health = require("modules.services.health")
        health.check()
    }
    
    header_filter_by_lua_block {
        require("core.phase_handlers").header_filter()
    }
    
    body_filter_by_lua_block {
        require("core.phase_handlers").body_filter()
    }
    
    log_by_lua_block {
        require("core.phase_handlers").log()
    }
}

# Detailed health check
location /health/details {
    access_by_lua_block {
        require("core.phase_handlers").access()
    }
    
    content_by_lua_block {
        -- Detailed health check specific content handling
        local health = require("modules.services.health")
        health.check_detailed()
    }
    
    header_filter_by_lua_block {
        require("core.phase_handlers").header_filter()
    }
    
    body_filter_by_lua_block {
        require("core.phase_handlers").body_filter()
    }
    
    log_by_lua_block {
        require("core.phase_handlers").log()
    }
} 