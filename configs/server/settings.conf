# Server Settings
# -----------------------------------------------------------------------------
listen 80;
server_name localhost;

# Global Variables
set $backend "";            # Backend service URL
set $violation_type "";     # Security violation type
set $details "";           # Violation details
set $error_code "";        # Error code for backend validation

# Apply Environment Settings
# ---------------------------------------------------------------------
client_max_body_size 10M;  # Default value, can be overridden by env var
client_body_timeout 12;
client_header_timeout 12;
proxy_read_timeout 60s;    # Default value, can be overridden by env var
proxy_connect_timeout 60s; # Default value, can be overridden by env var
proxy_send_timeout 60s;    # Default value, can be overridden by env var

# Global Logging
# ---------------------------------------------------------------------
access_log /var/log/nginx/access.log main_ext buffer=4k flush=1s;
access_log /var/log/nginx/security.log security if=$log_security buffer=4k flush=1s;